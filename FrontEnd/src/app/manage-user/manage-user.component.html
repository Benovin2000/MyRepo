<app-admin-navbar></app-admin-navbar>

<div class="container mt-5" *ngIf="visibleDiv === 1">
    <div class="row justify-content-center">
      <div class="col-lg-6">
        <div class="card">
          <div class="card-body">
            <div class="d-flex justify-content-end">
                <input type="button"  value="Add New +"  class="btn btn-primary" (click)="showDiv(2)"/>
              </div>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Name</th>
                  <th scope="col">Email</th>
                  <th scope="col">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr  *ngFor="let user of userinfo">
                    <td>{{user.id}}</td>
                    <td>{{user.name}}</td>
                    <td>{{user.email}}</td>
                    <td>
                        <input type="button"  value="Edit"  class="btn btn-primary btn-sm" (click)="ShowUpdateUser(user.id); showDiv(3)"/>&nbsp;&nbsp; 
                        <input type="button"  value="Delete"  class="btn btn-danger btn-sm" (click)="DeleteUser(user.id)"/>
                    </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add New User -->

  <div class="container mt-5" *ngIf="visibleDiv === 2">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">
            <h4>Add User</h4>
          </div>
          <div class="card-body">
            <form (ngSubmit)="register()" #registerForm="ngForm">
              <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="name" name="name" [(ngModel)]="user.name" required class="form-control" #name="ngModel">
          <div *ngIf="name.invalid && (name.dirty || name.touched)" class="text-danger">
            Input a valid Name
          </div>
              </div>
              <div class="form-group">
                  <label for="email">Email</label>
                <input type="text" id="email" name="email" [(ngModel)]="user.email" required class="form-control" #email="ngModel">
          <div *ngIf="email.invalid && (email.dirty || email.touched)" class="text-danger">
            Input a valid Email
          </div>
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" name="password" [(ngModel)]="user.password" required class="form-control" #password="ngModel">
                <div *ngIf="password.invalid && (password.dirty || password.touched)" class="text-danger">
                Input a valid Password.
                </div>
              </div>
              <br>
              <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

   <!-- Edit User -->

   <div class="container mt-5" *ngIf="visibleDiv === 3">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">
            <h4>Edit User</h4>
          </div>
          <div class="card-body">
            <form (ngSubmit)="UpdateUser()" #updateForm="ngForm">
              <div class="form-group">
                <label for="userid">User ID</label>
                <input type="text" id="userid" name="userid" [(ngModel)]="olduser.id" readonly class="form-control" value="olduser.id">
                <label for="oldname">Name</label>
                <input type="text" id="oldname" name="oldname" [(ngModel)]="olduser.name" required class="form-control" #oldname="ngModel">
          <div *ngIf="oldname.invalid && (oldname.dirty || oldname.touched)" class="text-danger">
            Input a valid Name
          </div>
              </div>
              <div class="form-group">
                  <label for="oldemail">Email</label>
                <input type="text" id="oldemail" name="oldemail" [(ngModel)]="olduser.email" required class="form-control" #oldemail="ngModel">
          <div *ngIf="oldemail.invalid && (oldemail.dirty || oldemail.touched)" class="text-danger">
            Input a valid Email
          </div>
              </div>
              <div class="form-group">
                <label for="oldpassword">Password</label>
              <input type="password" id="oldpassword" name="oldpassword" [(ngModel)]="olduser.password" readonly="true" class="form-control" #oldpassword="ngModel">
        <div *ngIf="oldpassword.invalid && (oldpassword.dirty || oldpassword.touched)" class="text-danger">
          Input a valid Email
        </div>
        <br>
            </div>
              <button type="submit" class="btn btn-primary" [disabled]="updateForm.invalid">Update</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
